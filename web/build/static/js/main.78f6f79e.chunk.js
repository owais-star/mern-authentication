(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{202:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(58),s=a.n(i),c=(a(202),a(203),a(14)),o=a(13),l=a(42),j=a(97),d=a(59),b=a(100),u=a.n(b),h=a(101),m=a.n(h),O=a(21),p=a(375),x=a(382),f=a(403),g=a(391),v=a(388),w=a(46),y=a.n(w),C="localhost"===window.location.hostname.split(":")[0]?"http://localhost:5000":"",N=a(384),S=a(1);function T(e){return Object(S.jsx)(p.a,{sx:{width:"100%"},spacing:2,children:Object(S.jsx)(N.a,{variant:"filled",severity:e.type,children:e.message})})}function E(){var e=Object(O.f)(),t=Object(r.useState)(""),a=Object(o.a)(t,2),n=a[0],i=a[1],s=Object(r.useState)(!1),b=Object(o.a)(s,2),h=b[0],w=b[1],N=l.a().shape({firstName:l.b().min(2,"Too Short!").max(50,"Too Long!").required("First name required"),lastName:l.b().min(2,"Too Short!").max(50,"Too Long!").required("Last name required"),email:l.b().email("Email must be a valid email address").required("Email is required"),password:l.b().required("Password is required")}),E=Object(d.c)({initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:N,onSubmit:function(t){y.a.post("".concat(C,"/api/v1/registration"),{firstName:t.firstName,lastName:t.lastName,email:t.email,password:t.password}).then((function(t){console.log(t.data),"User already registered."===t.data?(i(!1),setTimeout((function(){i("")}),3e3)):(i(!0),setTimeout((function(){e.push("/login")}),2e3))})).catch((function(e){console.log(e)}))}}),L=E.errors,k=E.touched,F=E.handleSubmit,z=E.getFieldProps;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(d.b,{value:E,children:Object(S.jsx)(d.a,{autoComplete:"off",noValidate:!0,onSubmit:F,children:Object(S.jsxs)(p.a,{spacing:3,children:[Object(S.jsxs)(p.a,{direction:{xs:"column",sm:"row"},spacing:2,children:[Object(S.jsx)(x.a,Object(c.a)(Object(c.a)({fullWidth:!0,label:"First name"},z("firstName")),{},{error:Boolean(k.firstName&&L.firstName),helperText:k.firstName&&L.firstName})),Object(S.jsx)(x.a,Object(c.a)(Object(c.a)({fullWidth:!0,label:"Last name"},z("lastName")),{},{error:Boolean(k.lastName&&L.lastName),helperText:k.lastName&&L.lastName}))]}),Object(S.jsx)(x.a,Object(c.a)(Object(c.a)({fullWidth:!0,autoComplete:"username",type:"email",label:"Email address"},z("email")),{},{error:Boolean(k.email&&L.email),helperText:k.email&&L.email})),Object(S.jsx)(x.a,Object(c.a)(Object(c.a)({fullWidth:!0,autoComplete:"current-password",type:h?"text":"password",label:"Password"},z("password")),{},{InputProps:{endAdornment:Object(S.jsx)(f.a,{position:"end",children:Object(S.jsx)(g.a,{edge:"end",onClick:function(){return w((function(e){return!e}))},children:Object(S.jsx)(j.a,{icon:h?u.a:m.a})})})},error:Boolean(k.password&&L.password),helperText:k.password&&L.password})),!0===n?Object(S.jsx)(T,{type:"success",message:"Created Account Successfully"}):"",!1===n?Object(S.jsx)(T,{type:"error",message:"An Account with this email is already Registered"}):"",Object(S.jsx)(v.a,{fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Register"})]})})})})}var L=function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(E,{})})},k=a(52),F=function(e,t){switch(t.type){case"USER_LOGIN":return t.payload.firstName&&t.payload.lastName&&t.payload.email&&t.payload._id?Object(c.a)(Object(c.a)({},e),{},{user:t.payload}):(console.log("invalid data in USER_LOGIN reducer "),e);case"USER_LOGOUT":return Object(c.a)(Object(c.a)({},e),{},{user:null});default:return e}},z=Object(r.createContext)("Initial Value"),I={user:void 0};function P(e){var t=e.children,a=Object(r.useReducer)(F,I),n=Object(o.a)(a,2),i=n[0],s=n[1];return Object(S.jsx)(z.Provider,{value:{state:i,dispatch:s},children:t})}var R=a(404),B=a(385),q=a(405);function U(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1],i=Object(r.useState)(),s=Object(o.a)(i,2),b=s[0],h=s[1],O=Object(r.useContext)(z),w=O.dispatch,N=(O.state,l.a().shape({email:l.b().email("Email must be a valid email address").required("Email is required"),password:l.b().required("Password is required")})),E=Object(d.c)({initialValues:{email:"",password:"",remember:!0},validationSchema:N,onSubmit:function(e){y.a.post("".concat(C,"/api/v1/login"),{email:e.email,password:e.password},{withCredentials:!0}).then((function(e){console.log(e.data),"No user is found with this email"===e.data||"Entered password is incorrect"===e.data?(n(!1),setTimeout((function(){n("")}),3e3)):(w({type:"USER_LOGIN",payload:{firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,_id:e.data._id}}),n(!0),setTimeout((function(){n("")}),2e3))})).catch((function(e){console.log(e)}))}}),L=E.errors,F=E.touched,I=E.values,P=E.handleSubmit,U=E.getFieldProps;return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(d.b,{value:E,children:Object(S.jsxs)(d.a,{autoComplete:"off",noValidate:!0,onSubmit:P,children:[Object(S.jsxs)(p.a,{spacing:3,children:[Object(S.jsx)(x.a,Object(c.a)(Object(c.a)({fullWidth:!0,autoComplete:"username",type:"email",label:"Email address"},U("email")),{},{error:Boolean(F.email&&L.email),helperText:F.email&&L.email})),Object(S.jsx)(x.a,Object(c.a)(Object(c.a)({fullWidth:!0,autoComplete:"current-password",type:b?"text":"password",label:"Password"},U("password")),{},{InputProps:{endAdornment:Object(S.jsx)(f.a,{position:"end",children:Object(S.jsx)(g.a,{onClick:function(){h((function(e){return!e}))},edge:"end",children:Object(S.jsx)(j.a,{icon:b?u.a:m.a})})})},error:Boolean(F.password&&L.password),helperText:F.password&&L.password})),!0===a?Object(S.jsx)(T,{type:"success",message:"Welcome"}):"",!1===a?Object(S.jsx)(T,{type:"error",message:"Invalid email or password"}):""]}),Object(S.jsxs)(p.a,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{my:2},children:[Object(S.jsx)(R.a,{control:Object(S.jsx)(B.a,Object(c.a)(Object(c.a)({},U("remember")),{},{checked:I.remember})),label:"Remember me"}),Object(S.jsx)(q.a,{component:k.b,variant:"subtitle2",to:"#",children:"Forgot password?"})]}),Object(S.jsx)(v.a,{fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Login"})]})})})}var _=function(){return Object(S.jsx)(U,{})},W=a(5),G=a(4),M=a(377),A=a(395),V=a(394),D=a(396),J=a(392),H=a(30),K=a(387),Q=a(386),X=a(184),Y=a(179),Z=a.n(Y),$=a(180),ee=a.n($),te=a(131),ae=a.n(te),re=a(129),ne=a.n(re),ie=a(130),se=a.n(ie),ce=a(103),oe=a.n(ce),le=Object(G.a)("div")((function(e){var t=e.theme;return Object(W.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(M.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(M.a)(t.palette.common.white,.25)},marginRight:t.spacing(2),marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(3),width:"auto"})})),je=Object(G.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),de=Object(G.a)(H.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(W.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("md"),{width:"20ch"})}}));function be(){var e=r.useState(null),t=Object(o.a)(e,2),a=t[0],n=t[1],i=r.useState(null),s=Object(o.a)(i,2),c=s[0],l=s[1],j=Boolean(a),d=Boolean(c),b=function(e){n(e.currentTarget)},u=function(){l(null)},h=function(){n(null),u()},m="primary-search-account-menu",O=Object(S.jsxs)(X.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:m,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:j,onClose:h,children:[Object(S.jsx)(Q.a,{onClick:h,children:"Profile"}),Object(S.jsx)(Q.a,{onClick:h,children:"My account"})]}),p="primary-search-account-menu-mobile",x=Object(S.jsxs)(X.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:p,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:d,onClose:u,children:[Object(S.jsxs)(Q.a,{children:[Object(S.jsx)(g.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",children:Object(S.jsx)(K.a,{badgeContent:4,color:"error",children:Object(S.jsx)(ne.a,{})})}),Object(S.jsx)("p",{children:"Messages"})]}),Object(S.jsxs)(Q.a,{children:[Object(S.jsx)(g.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit",children:Object(S.jsx)(K.a,{badgeContent:17,color:"error",children:Object(S.jsx)(se.a,{})})}),Object(S.jsx)("p",{children:"Notifications"})]}),Object(S.jsxs)(Q.a,{onClick:b,children:[Object(S.jsx)(g.a,{size:"large","aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(S.jsx)(ae.a,{})}),Object(S.jsx)("p",{children:"Profile"})]})]});return Object(S.jsxs)(V.a,{sx:{flexGrow:1},children:[Object(S.jsx)(A.a,{position:"static",children:Object(S.jsxs)(D.a,{children:[Object(S.jsx)(g.a,{size:"large",edge:"start",color:"inherit","aria-label":"open drawer",sx:{mr:2},children:Object(S.jsx)(Z.a,{})}),Object(S.jsx)(J.a,{variant:"h6",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:"MUI"}),Object(S.jsxs)(le,{children:[Object(S.jsx)(je,{children:Object(S.jsx)(ee.a,{})}),Object(S.jsx)(de,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]}),Object(S.jsx)(V.a,{sx:{flexGrow:1}}),Object(S.jsxs)(V.a,{sx:{display:{xs:"none",md:"flex"}},children:[Object(S.jsx)(g.a,{size:"large","aria-label":"show 4 new mails",color:"inherit",children:Object(S.jsx)(K.a,{badgeContent:4,color:"error",children:Object(S.jsx)(ne.a,{})})}),Object(S.jsx)(g.a,{size:"large","aria-label":"show 17 new notifications",color:"inherit",children:Object(S.jsx)(K.a,{badgeContent:17,color:"error",children:Object(S.jsx)(se.a,{})})}),Object(S.jsx)(g.a,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":m,"aria-haspopup":"true",onClick:b,color:"inherit",children:Object(S.jsx)(ae.a,{})})]}),Object(S.jsx)(V.a,{sx:{display:{xs:"flex",md:"none"}},children:Object(S.jsx)(g.a,{size:"large","aria-label":"show more","aria-controls":p,"aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},color:"inherit",children:Object(S.jsx)(oe.a,{})})})]})}),x,O]})}var ue=a(186),he=a(397),me=a(398),Oe=a(399),pe=a(400),xe=a(401),fe=a(390),ge=a(66),ve=a(181),we=a.n(ve),ye=a(182),Ce=a.n(ye),Ne=a(183),Se=a.n(Ne),Te=["expand"],Ee=Object(G.a)((function(e){e.expand;var t=Object(ue.a)(e,Te);return Object(S.jsx)(g.a,Object(c.a)({},t))}))((function(e){var t=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}}));function Le(e){var t=r.useState(!1),a=Object(o.a)(t,2),n=a[0],i=a[1];return Object(S.jsxs)(he.a,{sx:{maxWidth:300},children:[Object(S.jsx)(me.a,{avatar:Object(S.jsx)(fe.a,{sx:{bgcolor:ge.a[500]},"aria-label":"recipe",children:Object(S.jsx)("img",{width:"50px",src:e.profile,alt:"loading..."})}),action:Object(S.jsx)(g.a,{"aria-label":"settings",children:Object(S.jsx)(oe.a,{})}),title:e.title,subheader:e.date}),Object(S.jsx)(Oe.a,{component:"img",height:"194",image:e.postimage,alt:"Image Loading..."}),Object(S.jsx)(pe.a,{children:Object(S.jsx)(J.a,{variant:"body2",color:"text.secondary",children:e.dis})}),Object(S.jsxs)(xe.a,{disableSpacing:!0,children:[Object(S.jsx)(g.a,{"aria-label":"add to favorites",children:Object(S.jsx)(we.a,{})}),Object(S.jsx)(g.a,{"aria-label":"share",children:Object(S.jsx)(Ce.a,{})}),Object(S.jsx)(Ee,{expand:n,onClick:function(){i(!n)},"aria-expanded":n,"aria-label":"show more",children:Object(S.jsx)(Se.a,{})})]})]})}var ke=a(393);function Fe(){var e=Object(r.useContext)(z),t=e.state,a=(e.dispatch,Object(r.useState)("")),n=Object(o.a)(a,2),i=n[0],s=n[1];return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("form",{onSubmit:function(e){var a;(e.preventDefault(),""!==i)&&((null===t||void 0===t||null===(a=t.user)||void 0===a?void 0:a.firstName)&&y.a.post("".concat(C,"/api/v1/post"),{text:i,author:t.user.fullName}).then((function(e){})))},children:[Object(S.jsx)(V.a,{sx:{"& > :not(style)":{marginTop:"20px",marginBottom:"14px",width:"100%"}},autoComplete:"off",children:Object(S.jsx)(x.a,{label:"Enter text",value:i,onChange:function(e){s(e.target.value)},variant:"filled"})}),Object(S.jsx)(ke.a,{variant:"contained",color:"primary",size:"large",style:{marginBottom:"40px"},type:"submit",children:"Post"})]})})}a(326);var ze=function(){var e=Object(r.useContext)(z),t=e.state;return e.dispatch,Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(be,{}),Object(S.jsx)("h1",{children:t.user.email}),Object(S.jsx)(Fe,{}),Object(S.jsx)(Le,{title:"test"})]})};function Ie(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)("h1",{children:"Loading...."})})}var Pe=function(){var e=Object(r.useContext)(z),t=e.state,a=e.dispatch;return Object(r.useEffect)((function(){return y.a.get("".concat(C,"/api/v1/profile"),{withCredentials:!0}).then((function(e){e.data.email?a({type:"USER_LOGIN",payload:{firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,_id:e.data._id}}):a({type:"USER_LOGOUT"})})).catch((function(e){a({type:"USER_LOGOUT"})})),function(){}}),[]),Object(S.jsxs)(S.Fragment,{children:[void 0===t.user?Object(S.jsx)(O.c,{children:Object(S.jsx)(O.a,{exact:!0,path:"/",children:Object(S.jsx)(Ie,{})})}):null,null===t.user?Object(S.jsxs)(O.c,{children:[Object(S.jsx)(O.a,{exact:!0,path:"/",component:_}),Object(S.jsx)(O.a,{path:"/signup",component:L})]}):null,t.user?Object(S.jsx)(O.c,{children:Object(S.jsx)(O.a,{exact:!0,path:"/",children:Object(S.jsx)(ze,{})})}):null]})},Re=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,406)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),i(e),s(e)}))};s.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(P,{children:Object(S.jsx)(k.a,{children:Object(S.jsx)(Pe,{})})})}),document.getElementById("root")),Re()}},[[327,1,2]]]);
//# sourceMappingURL=main.78f6f79e.chunk.js.map